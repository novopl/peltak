

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>peltak.core.hooks &mdash; peltak 0.26.5 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/overrides.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="peltak.core.log" href="log.html" />
    <link rel="prev" title="peltak.core.git" href="git.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> peltak
          

          
          </a>

          
            
            
              <div class="version">
                0.26.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../guides/_index.html">Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/_index.html">Reference Documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../_index.html">Dev Docs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../contrib.html">Setup up the project for development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../flows.html">Flows</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="_index.html"><code class="docutils literal notranslate"><span class="pre">peltak.core</span></code></a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="context.html"><code class="docutils literal notranslate"><span class="pre">peltak.core.context</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="fs.html"><code class="docutils literal notranslate"><span class="pre">peltak.core.fs</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="git.html"><code class="docutils literal notranslate"><span class="pre">peltak.core.git</span></code></a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">peltak.core.hooks</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#using-hooks">Using Hooks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="log.html"><code class="docutils literal notranslate"><span class="pre">peltak.core.log</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="pelconf.html"><code class="docutils literal notranslate"><span class="pre">peltak.core.pelconf</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="shell.html"><code class="docutils literal notranslate"><span class="pre">peltak.core.shell</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="util.html"><code class="docutils literal notranslate"><span class="pre">peltak.core.util</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="versioning.html"><code class="docutils literal notranslate"><span class="pre">peltak.core.versioning</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../_index.html#reference">Reference</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">peltak</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../_index.html">Dev Docs</a> &raquo;</li>
        
          <li><a href="_index.html"><code class="docutils literal notranslate"><span class="pre">peltak.core</span></code></a> &raquo;</li>
        
      <li><code class="docutils literal notranslate"><span class="pre">peltak.core.hooks</span></code></li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/dev/core/hooks.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-peltak.core.hooks">
<span id="peltak-core-hooks"></span><h1><code class="docutils literal notranslate"><span class="pre">peltak.core.hooks</span></code><a class="headerlink" href="#module-peltak.core.hooks" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-peltak.core.hooks"></span><div class="section" id="using-hooks">
<h2>Using Hooks<a class="headerlink" href="#using-hooks" title="Permalink to this headline">¶</a></h2>
<p>Hook allow responding to various events during command execution. peltak exposes
a set of standard hooks that you can use to react to what’s happening. Commands
(including ones in external packages) can provide their own hooks to be used
by other commands.</p>
<p>To call a hook you don’t have to register it, just know it’s name. You can do
it simply with:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">peltak.commands</span> <span class="kn">import</span> <span class="n">root_cli</span>
<span class="kn">from</span> <span class="nn">peltak.core</span> <span class="kn">import</span> <span class="n">hooks</span>

<span class="nd">@root_cli.command</span><span class="p">(</span><span class="s1">&#39;test-command&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_command</span><span class="p">():</span>
    <span class="n">hooks</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;pre-test-command&#39;</span><span class="p">,</span> <span class="mf">3.14159</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="s1">&#39;hello, world!&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Registering a handler for any hook is also very simple:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">peltak.core</span> <span class="kn">import</span> <span class="n">hooks</span>

<span class="nd">@hooks.register</span><span class="p">(</span><span class="s1">&#39;pre-test-command&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">pre_test_command</span><span class="p">(</span><span class="n">pi</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="s1">&#39;&lt;msg missing&gt;&#39;</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;pre_test_command called with ({}, {})&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pi</span><span class="p">,</span> <span class="n">msg</span><span class="p">))</span>
</pre></div>
</div>
<dl class="class">
<dt id="peltak.core.hooks.HooksRegister">
<em class="property">class </em><code class="descclassname">peltak.core.hooks.</code><code class="descname">HooksRegister</code><a class="reference internal" href="../../_modules/peltak/core/hooks.html#HooksRegister"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#peltak.core.hooks.HooksRegister" title="Permalink to this definition">¶</a></dt>
<dd><p>Intermediary between hooks emitters and handlers.</p>
<dl class="method">
<dt id="peltak.core.hooks.HooksRegister.call">
<code class="descname">call</code><span class="sig-paren">(</span><em>name</em>, <em>*args</em>, <em>**kw</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/peltak/core/hooks.html#HooksRegister.call"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#peltak.core.hooks.HooksRegister.call" title="Permalink to this definition">¶</a></dt>
<dd><p>Call all hooks registered for the given name.</p>
<p>This will pass all arguments except for the name directly to the hook.
Remember that hook handler should not modify those arguments as that
will affect all hooks called later in the sequence.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> – Then name of the hook.</li>
<li><strong>**kw</strong> (<em>*args</em><em>,</em>) – Arguments and keyword arguments that should be passed to the
hook handlers.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="peltak.core.hooks.HooksRegister.remove">
<code class="descname">remove</code><span class="sig-paren">(</span><em>name</em>, <em>fn</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/peltak/core/hooks.html#HooksRegister.remove"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#peltak.core.hooks.HooksRegister.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a handler for a given hook.</p>
<p>After this call, the <em>fn</em> function won’t be called when the hook is
called.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> – The name of the hook.</li>
<li><strong>fn</strong> – The function that we want to unregister from the hook calls.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="log.html" class="btn btn-neutral float-right" title="peltak.core.log" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="git.html" class="btn btn-neutral float-left" title="peltak.core.git" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2018, Mateusz &#39;novo&#39; Klos

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>