#!/bin/bash

pipenv run pytest \
-c ops/tools/pytest.ini \
--cov-config=ops/tools/coverage.ini \
--cov=src/peltak/extra/scripts \
--cov-report=term \
--cov-report=html:{{ conf.build_dir }}/coverage/scripts \
test/unit

{% set cov_path = proj_path(conf.build_dir, 'coverage/scripts/index.html') %}
{{ '<32>HTML report: <34>file://{}' | cprint(cov_path) }}
